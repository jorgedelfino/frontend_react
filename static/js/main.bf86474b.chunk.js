(this["webpackJsonpcliente-api"]=this["webpackJsonpcliente-api"]||[]).push([[0],{145:function(e,t,a){e.exports=a(285)},171:function(e,t,a){},176:function(e,t){},178:function(e,t){},192:function(e,t){},194:function(e,t){},222:function(e,t){},224:function(e,t){},225:function(e,t){},231:function(e,t){},233:function(e,t){},251:function(e,t){},253:function(e,t){},265:function(e,t){},268:function(e,t){},285:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(142),o=a.n(c),l=a(3),i=a(6),s=a(7),u=r.a.createContext([{},function(){}]),m=function(e){var t={};localStorage.getItem("token")&&(t={token:localStorage.getItem("token"),auth:!0});var a=Object(n.useState)(t),c=Object(l.a)(a,2),o=c[0],i=c[1];return r.a.createElement(u.Provider,{value:[o,i]},e.children)},p=Object(s.f)((function(e){var t=Object(n.useContext)(u),a=Object(l.a)(t,2),c=a[0],o=a[1];return r.a.createElement("header",{className:"barra"},r.a.createElement("div",{className:"contenedor"},r.a.createElement("div",{className:"contenido-barra"},r.a.createElement("h1",null,"CRM - Administrador de Clientes"),c.auth?r.a.createElement("button",{type:"button",className:"btn btn-rojo",onClick:function(){o({token:"",auth:!1}),localStorage.setItem("token",""),e.history.push("/iniciar-sesion")}},r.a.createElement("i",{className:"far fa-times-circle"}),"Cerrar Sesi\xf3n"):null)))})),d=function(){var e=Object(n.useContext)(u),t=Object(l.a)(e,2),a=t[0];t[1];return a.auth?r.a.createElement("aside",{className:"sidebar col-3"},r.a.createElement("h2",null,"Administraci\xf3n"),r.a.createElement("nav",{className:"navegacion"},r.a.createElement(i.b,{to:"/",className:"clientes"},"Clientes"),r.a.createElement(i.b,{to:"/productos",className:"productos"},"Productos"),r.a.createElement(i.b,{to:"/pedidos",className:"pedidos"},"Pedidos"))):null},b=a(4),f=a.n(b),E=a(10),h=a(144),v=a.n(h).a.create({baseURL:"https://hidden-fortress-98144.herokuapp.com/"}),g=a(5),j=a.n(g),N=function(e){var t=e.cliente,a=t._id,c=t.nombre,o=t.apellido,s=t.empresa,m=t.email,p=t.telefono,d=Object(n.useContext)(u),b=Object(l.a)(d,2),f=b[0];b[1];return r.a.createElement("li",{className:"cliente"},r.a.createElement("div",{className:"info-cliente"},r.a.createElement("p",{className:"nombre"},c," ",o),r.a.createElement("p",{className:"empresa"},s),r.a.createElement("p",null,m),r.a.createElement("p",null,p)),r.a.createElement("div",{className:"acciones"},r.a.createElement(i.b,{to:"/clientes/editar/".concat(a),className:"btn btn-azul"},r.a.createElement("i",{className:"fas fa-pen-alt"}),"Editar Cliente"),r.a.createElement(i.b,{to:"/pedidos/nuevo/".concat(a),className:"btn btn-amarillo"},r.a.createElement("i",{className:"fas fa-plus"}),"Nuevo Pedido"),r.a.createElement("button",{type:"button",className:"btn btn-rojo btn-eliminar",onClick:function(){return e=a,void j.a.fire({title:"\xbfEstas seguro?",text:"Un cliente eliminado no se puede recuperar",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"}).then((function(t){t.value&&v.delete("/clientes/".concat(e),{headers:{Authorization:"Bearer ".concat(f.token)}}).then((function(e){j.a.fire("Eliminado",e.data.mensaje,"success")}))}));var e}},r.a.createElement("i",{className:"fas fa-times"}),"Eliminar Cliente")))},O=(a(171),function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"bounce1"}),r.a.createElement("div",{className:"bounce2"}),r.a.createElement("div",{className:"bounce3"}))}),y=Object(s.f)((function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],o=a[1],s=Object(n.useContext)(u),m=Object(l.a)(s,2),p=m[0],d=m[1];return Object(n.useEffect)((function(){""!==p.token?function(){var t=Object(E.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.get("/clientes",{headers:{Authorization:"Bearer ".concat(p.token)}});case 3:a=t.sent,o(a.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),(t.t0.response.status=500)&&(d({token:"",auth:!1}),localStorage.setItem("token",""),e.history.push("/iniciar-sesion"));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()():(d({token:"",auth:!1}),localStorage.setItem("token",""),e.history.push("/iniciar-sesion"))}),[c]),p.auth||(d({token:"",auth:!1}),localStorage.setItem("token",""),e.history.push("/iniciar-sesion")),c.length?r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Clientes"),r.a.createElement(i.b,{to:"/clientes/nuevo",className:"btn btn-verde nvo-cliente"},r.a.createElement("i",{className:"fas fa-plus-circle"}),"Nuevo Cliente"),r.a.createElement("ul",{className:"listado-clientes"},c.map((function(e){return r.a.createElement(N,{key:e._id,cliente:e})})))):r.a.createElement(O,null)})),x=a(19),C=a(12),k=Object(s.f)((function(e){var t=Object(n.useState)({nombre:"",apellido:"",empresa:"",email:"",telefono:""}),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(n.useContext)(u),s=Object(l.a)(i,2),m=s[0],p=(s[1],function(e){o(Object(C.a)(Object(C.a)({},c),{},Object(x.a)({},e.target.name,e.target.value)))});return m.auth||localStorage.getItem("token")===m.token||e.history.push("/iniciar-sesion"),r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Nuevo Cliente"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),v.post("/clientes",c,{headers:{Authorization:"Bearer ".concat(m.token)}}).then((function(t){11e3===t.data.code?j.a.fire({type:"error",title:"Hubo un error",text:"Ese cliente ya esta registrado"}):j.a.fire("Se agreg\xf3 el cliente",t.data.mensaje,"success"),e.history.push("/")}))}},r.a.createElement("legend",null,"Llena todos los campos"),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Nombre:"),r.a.createElement("input",{type:"text",placeholder:"Nombre Cliente",name:"nombre",onChange:p})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Apellido:"),r.a.createElement("input",{type:"text",placeholder:"Apellido Cliente",name:"apellido",onChange:p})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Empresa:"),r.a.createElement("input",{type:"text",placeholder:"Empresa Cliente",name:"empresa",onChange:p})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",placeholder:"Email Cliente",name:"email",onChange:p})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Tel\xe9fono:"),r.a.createElement("input",{type:"tel",placeholder:"Tel\xe9fono Cliente",name:"telefono",onChange:p})),r.a.createElement("div",{className:"enviar"},r.a.createElement("input",{type:"submit",className:"btn btn-azul",value:"Agregar Cliente",disabled:function(){var e=c.nombre,t=c.apellido,a=c.email,n=c.empresa,r=c.telefono;return!e.length||!t.length||!a.length||!n.length||!r.length}()}))))})),S=Object(s.f)((function(e){var t=e.match.params.id,a=Object(n.useState)({nombre:"",apellido:"",empresa:"",email:"",telefono:""}),c=Object(l.a)(a,2),o=c[0],i=c[1],s=Object(n.useContext)(u),m=Object(l.a)(s,2),p=m[0];m[1];Object(n.useEffect)((function(){""!==p.token?function(){var a=Object(E.a)(f.a.mark((function a(){var n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v.get("/clientes/".concat(t),{headers:{Authorization:"Bearer ".concat(p.token)}});case 3:n=a.sent,i(n.data),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),(a.t0.response.status=500)&&e.history.push("/iniciar-sesion");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}}()():e.history.push("/iniciar-sesion")}),[]);var d=function(e){i(Object(C.a)(Object(C.a)({},o),{},Object(x.a)({},e.target.name,e.target.value)))};return p.auth||localStorage.getItem("token")===p.token||e.history.push("/iniciar-sesion"),r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Editar Cliente"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),v.put("/clientes/".concat(o._id),o,{headers:{Authorization:"Bearer ".concat(p.token)}}).then((function(t){11e3===t.data.code?j.a.fire({type:"error",title:"Hubo un error",text:"Ese cliente ya esta registrado"}):j.a.fire("Correcto","Se actualizo correctamente","success"),e.history.push("/")}))}},r.a.createElement("legend",null,"Llena todos los campos"),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Nombre:"),r.a.createElement("input",{type:"text",placeholder:"Nombre Cliente",name:"nombre",onChange:d,value:o.nombre})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Apellido:"),r.a.createElement("input",{type:"text",placeholder:"Apellido Cliente",name:"apellido",onChange:d,value:o.apellido})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Empresa:"),r.a.createElement("input",{type:"text",placeholder:"Empresa Cliente",name:"empresa",onChange:d,value:o.empresa})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",placeholder:"Email Cliente",name:"email",onChange:d,value:o.email})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Tel\xe9fono:"),r.a.createElement("input",{type:"tel",placeholder:"Tel\xe9fono Cliente",name:"telefono",onChange:d,value:o.telefono})),r.a.createElement("div",{className:"enviar"},r.a.createElement("input",{type:"submit",className:"btn btn-azul",value:"Guardar Cambios",disabled:function(){var e=o.nombre,t=o.apellido,a=o.email,n=o.empresa,r=o.telefono;return!e.length||!t.length||!a.length||!n.length||!r.length}()}))))})),w=function(e){var t=e.producto;return r.a.createElement("li",{className:"producto"},r.a.createElement("div",{className:"info-producto"},r.a.createElement("p",{className:"nombre"},t.nombre),r.a.createElement("p",{className:"precio"},"$ ",t.precio),t.imagen?r.a.createElement("img",{src:"".concat("https://hidden-fortress-98144.herokuapp.com/","/").concat(t.imagen),alt:"imagen"}):null),r.a.createElement("div",{className:"acciones"},r.a.createElement(i.b,{to:"/productos/editar/".concat(t._id),className:"btn btn-azul"},r.a.createElement("i",{className:"fas fa-pen-alt"}),"Editar Producto"),r.a.createElement("button",{type:"button",className:"btn btn-rojo btn-eliminar",onClick:function(){return e=t._id,void j.a.fire({title:"\xbfEstas seguro?",text:"Un producto eliminado no se puede recuperar",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar",cancelButtonText:"Cancelar"}).then((function(t){t.value&&v.delete("/productos/".concat(e)).then((function(e){200===e.status&&j.a.fire("Eliminado",e.data.mensaje,"success")}))}));var e}},r.a.createElement("i",{className:"fas fa-times"}),"Eliminar Producto")))},P=Object(s.f)((function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],o=a[1],s=Object(n.useContext)(u),m=Object(l.a)(s,2),p=m[0];m[1];return Object(n.useEffect)((function(){""!==p.token?function(){var t=Object(E.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.get("/productos",{headers:{Authorization:"Bearer ".concat(p.token)}});case 3:a=t.sent,o(a.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),(t.t0.response.status=500)&&e.history.push("/iniciar-sesion");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()():e.history.push("/iniciar-sesion")}),[]),p.auth||e.history.push("/iniciar-sesion"),c.length?r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Productos"),r.a.createElement(i.b,{to:"/productos/nuevo",className:"btn btn-verde nvo-cliente"},r.a.createElement("i",{className:"fas fa-plus-circle"}),"Nuevo Producto"),r.a.createElement("ul",{className:"listado-productos"},c.map((function(e){return r.a.createElement(w,{key:e._id,producto:e})})))):r.a.createElement(O,null)})),B=Object(s.f)((function(e){var t=Object(n.useState)({nombre:"",precio:""}),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(""),s=Object(l.a)(i,2),m=s[0],p=s[1],d=Object(n.useContext)(u),b=Object(l.a)(d,2),h=b[0],g=(b[1],function(){var t=Object(E.a)(f.a.mark((function t(a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),(n=new FormData).append("nombre",c.nombre),n.append("precio",c.precio),n.append("imagen",m),t.prev=5,t.next=8,v.post("/productos",n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(h.token)}});case 8:200===(r=t.sent).status&&j.a.fire("Agregado Correctamente",r.data.mensaje,"success"),e.history.push("/productos"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(5),console.log(t.t0),j.a.fire({type:"error",title:"Hubo un error",text:"Vuelva a intentarlo"});case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e){return t.apply(this,arguments)}}()),N=function(e){o(Object(C.a)(Object(C.a)({},c),{},Object(x.a)({},e.target.name,e.target.value)))};return h.auth||localStorage.getItem("token")===h.token||e.history.push("/iniciar-sesion"),r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Nuevo Producto"),r.a.createElement("form",{onSubmit:g},r.a.createElement("legend",null,"Llena todos los campos"),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Nombre:"),r.a.createElement("input",{type:"text",placeholder:"Nombre Producto",name:"nombre",onChange:N})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Precio:"),r.a.createElement("input",{type:"number",name:"precio",min:"0.00",step:"0.01",placeholder:"Precio",onChange:N})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Imagen:"),r.a.createElement("input",{type:"file",name:"imagen",onChange:function(e){p(e.target.files[0])}})),r.a.createElement("div",{className:"enviar"},r.a.createElement("input",{type:"submit",className:"btn btn-azul",value:"Agregar Producto"}))))})),A=Object(s.f)((function(e){var t=e.match.params.id,a=Object(n.useState)({nombre:"",precio:"",imagen:""}),c=Object(l.a)(a,2),o=c[0],i=c[1],s=Object(n.useState)(""),m=Object(l.a)(s,2),p=m[0],d=m[1],b=Object(n.useContext)(u),h=Object(l.a)(b,2),g=h[0];h[1];Object(n.useEffect)((function(){""!==g.token?function(){var a=Object(E.a)(f.a.mark((function a(){var n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v.get("/productos/".concat(t),{headers:{Authorization:"Bearer ".concat(g.token)}});case 3:n=a.sent,i(n.data),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),(a.t0.response.status=500)&&e.history.push("/iniciar-sesion");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}}()():e.history.push("/iniciar-sesion")}),[]);var N=function(){var a=Object(E.a)(f.a.mark((function a(n){var r,c;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),(r=new FormData).append("nombre",o.nombre),r.append("precio",o.precio),r.append("imagen",p),a.prev=5,a.next=8,v.put("/productos/".concat(t),r,{headers:{"Content-Type":"multipart/form-data"}});case 8:200===(c=a.sent).status&&j.a.fire("Agregado Correctamente",c.data.mensaje,"success"),e.history.push("/productos"),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(5),console.log(a.t0),j.a.fire({type:"error",title:"Hubo un error",text:"Vuelva a intentarlo"});case 17:case"end":return a.stop()}}),a,null,[[5,13]])})));return function(e){return a.apply(this,arguments)}}(),y=function(e){i(Object(C.a)(Object(C.a)({},o),{},Object(x.a)({},e.target.name,e.target.value)))},k=o.nombre,S=o.precio,w=o.imagen;return g.auth||localStorage.getItem("token")===g.token||e.history.push("/iniciar-sesion"),k?r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Editar Producto"),r.a.createElement("form",{onSubmit:N},r.a.createElement("legend",null,"Llena todos los campos"),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Nombre:"),r.a.createElement("input",{type:"text",placeholder:"Nombre Producto",name:"nombre",onChange:y,defaultValue:k})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Precio:"),r.a.createElement("input",{type:"number",name:"precio",min:"0.00",step:"0.01",placeholder:"Precio",onChange:y,defaultValue:S})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Imagen:"),w?r.a.createElement("img",{src:"".concat("https://hidden-fortress-98144.herokuapp.com/","/").concat(w),alt:"imagen",width:"300"}):null,r.a.createElement("input",{type:"file",name:"imagen",onChange:function(e){d(e.target.files[0])}})),r.a.createElement("div",{className:"enviar"},r.a.createElement("input",{type:"submit",className:"btn btn-azul",value:"Editar Producto"})))):r.a.createElement(O,null)})),z=function(e){var t=e.pedido,a=t.cliente;return t.pedido[0].producto&&t.pedido[0]?r.a.createElement("li",{className:"pedido"},r.a.createElement("div",{className:"info-pedido"},r.a.createElement("p",{className:"id"},"ID: ",a._id),r.a.createElement("p",{className:"nombre"},"Cliente: ",a.nombre," ",a.apellido),r.a.createElement("div",{className:"articulos-pedido"},r.a.createElement("p",{className:"productos"},"Art\xedculos Pedido: "),r.a.createElement("ul",null,t.pedido.map((function(e){return r.a.createElement("li",{key:t._id+e.producto._id},r.a.createElement("p",null,e.producto.nombre," "),r.a.createElement("p",null,"Precio: $",e.producto.precio," "),r.a.createElement("p",null,"Cantidad: ",e.cantidad))})))),r.a.createElement("p",{className:"total"},"Total: $",t.total," ")),r.a.createElement("div",{className:"acciones"},r.a.createElement("button",{type:"button",className:"btn btn-rojo btn-eliminar"},r.a.createElement("i",{className:"fas fa-times"}),"Eliminar Pedido"))):null},I=Object(s.f)((function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(n.useContext)(u),s=Object(l.a)(i,2),m=s[0];s[1];return Object(n.useEffect)((function(){""!==m.token?function(){var t=Object(E.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.get("/pedidos",{headers:{Authorization:"Bearer ".concat(m.token)}});case 3:a=t.sent,o(a.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),(t.t0.response.status=500)&&e.history.push("/iniciar-sesion");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()():e.history.push("/iniciar-sesion")}),[]),m.auth||e.history.push("/iniciar-sesion"),c.length?r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Pedidos"),r.a.createElement("ul",{className:"listado-pedidos"},c.map((function(e){return r.a.createElement(z,{key:e._id,pedido:e})})))):r.a.createElement(O,null)})),D=a(49),T=function(e){return r.a.createElement("form",{onSubmit:e.buscarProducto},r.a.createElement("legend",null,"Busca un Producto y agrega una cantidad"),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Productos:"),r.a.createElement("input",{type:"text",placeholder:"Nombre Productos",name:"productos",onChange:e.leerDatosBusqueda})),r.a.createElement("input",{type:"submit",className:"btn btn-azul btn-block",value:"Buscar Producto"}))},F=function(e){var t=e.producto,a=e.restarProductos,n=e.sumarProductos,c=e.eliminarProductoPedido,o=e.index;return r.a.createElement("li",null,r.a.createElement("div",{className:"texto-producto"},r.a.createElement("p",{className:"nombre"},t.nombre),r.a.createElement("p",{className:"precio"},"$",t.precio)),r.a.createElement("div",{className:"acciones"},r.a.createElement("div",{className:"contenedor-cantidad"},r.a.createElement("i",{className:"fas fa-minus",onClick:function(){return a(o)}}),r.a.createElement("p",null,t.cantidad),r.a.createElement("i",{className:"fas fa-plus",onClick:function(){return n(o)}})),r.a.createElement("button",{type:"button",className:"btn btn-rojo",onClick:function(){return c(t.producto)}},r.a.createElement("i",{className:"fas fa-minus-circle"}),"Eliminar Producto")))},_=Object(s.f)((function(e){var t=e.match.params.id,a=Object(n.useState)({}),c=Object(l.a)(a,2),o=c[0],i=c[1],s=Object(n.useState)(""),m=Object(l.a)(s,2),p=m[0],d=m[1],b=Object(n.useState)([]),h=Object(l.a)(b,2),g=h[0],N=h[1],O=Object(n.useState)(0),y=Object(l.a)(O,2),x=y[0],C=y[1],k=Object(n.useContext)(u),S=Object(l.a)(k,2),w=S[0];S[1];Object(n.useEffect)((function(){(function(){var e=Object(E.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/clientes/".concat(t),{headers:{Authorization:"Bearer ".concat(w.token)}});case 2:a=e.sent,i(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),I()}),[g]);var P=function(){var e=Object(E.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v.post("/productos/busqueda/".concat(p),{},{headers:{Authorization:"Bearer ".concat(w.token)}});case 3:(a=e.sent).data[0]?((n=a.data[0]).producto=a.data[0]._id,n.cantidad=0,N([].concat(Object(D.a)(g),[n]))):j.a.fire({type:"error",title:"No resultados",text:"No hay resultados"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){var t=Object(D.a)(g);0!==t[e].cantidad&&(t[e].cantidad--,N(t))},A=function(e){var t=Object(D.a)(g);t[e].cantidad++,N(t)},z=function(e){var t=g.filter((function(t){return t.producto!==e}));N(t)},I=function(){if(0!==g.length){var e=0;g.map((function(t){return e+=t.cantidad*t.precio})),C(e)}else C(0)},_=function(){var t=Object(E.a)(f.a.mark((function t(a){var n,r,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.match.params.id,r={cliente:n,pedido:g,total:x},t.next=5,v.post("/pedidos/nuevo/".concat(n),r,{headers:{Authorization:"Bearer ".concat(w.token)}});case 5:200===(c=t.sent).status?j.a.fire({type:"success",title:"Correcto",text:c.data.mensaje}):j.a.fire({type:"error",title:"Hubo un error",text:"Vuelva a intentarlo"}),e.history.push("/pedidos");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement("h2",null,"Nuevo Pedido"),r.a.createElement("div",{className:"ficha-cliente"},r.a.createElement("h3",null,"Datos de Cliente"),r.a.createElement("p",null,o.nombre," ",o.apellido),r.a.createElement("p",null,"Tel\xe9fono: ",o.telefono)),r.a.createElement(T,{buscarProducto:P,leerDatosBusqueda:function(e){d(e.target.value)}}),r.a.createElement("ul",{className:"resumen"},g.map((function(e,t){return r.a.createElement(F,{producto:e,key:e.producto,restarProductos:B,sumarProductos:A,eliminarProductoPedido:z,index:t})}))),r.a.createElement("p",{className:"total"},"Total a Pagar: ",r.a.createElement("span",null,"$ ",x)),x>0?r.a.createElement("form",{onSubmit:_},r.a.createElement("input",{type:"submit",className:"btn btn-verde btn-block",value:"Realizar pedido"})):null)})),H=(a(172),Object(s.f)((function(e){var t=Object(n.useState)({}),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(n.useContext)(u),s=Object(l.a)(i,2),m=s[0],p=s[1],d=function(){var t=Object(E.a)(f.a.mark((function t(a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,v.post("/iniciar-sesion",c);case 4:n=t.sent,r=n.data.token,localStorage.setItem("token",r),p({token:r,auth:!0}),j.a.fire("Login Correcto","Has iniciado Sesi\xf3n","success"),e.history.push("/"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),t.t0.response?j.a.fire({type:"error",title:"Hubo un error",text:t.t0.response.data.mensaje}):j.a.fire({type:"error",title:"Hubo un error",text:"Hubo un error"});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}(),b=function(e){o(Object(C.a)(Object(C.a)({},c),{},Object(x.a)({},e.target.name,e.target.value)))};return m.auth&&e.history.push("/"),r.a.createElement("div",{className:"login"},r.a.createElement("h2",null,"Iniciar Sesion"),r.a.createElement("div",{className:"contenedor-formulario"},r.a.createElement("form",{onSubmit:d},r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",name:"email",placeholder:"Email para Iniciar Sesion",required:!0,onChange:b})),r.a.createElement("div",{className:"campo"},r.a.createElement("label",null,"Contrase\xf1a"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Contrase\xf1a para Iniciar Sesion",required:!0,onChange:b})),r.a.createElement("input",{type:"submit",value:"Iniciar Sesion",className:"btn btn-verde btn-block"}))))})));var L=function(){var e=Object(n.useContext)(u),t=Object(l.a)(e,2),a=t[0],c=t[1];return r.a.createElement(i.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(m,{value:[a,c]},r.a.createElement(p,null),r.a.createElement("div",{className:"grid contenedor contenido-principal"},r.a.createElement(d,null),r.a.createElement("main",{className:"caja-contenido col-9"},r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:y}),r.a.createElement(s.a,{exact:!0,path:"/clientes/nuevo",component:k}),r.a.createElement(s.a,{exact:!0,path:"/clientes/editar/:id",component:S}),r.a.createElement(s.a,{exact:!0,path:"/productos",component:P}),r.a.createElement(s.a,{exact:!0,path:"/productos/nuevo",component:B}),r.a.createElement(s.a,{exact:!0,path:"/productos/editar/:id",component:A}),r.a.createElement(s.a,{exact:!0,path:"/pedidos",component:I}),r.a.createElement(s.a,{exact:!0,path:"/pedidos/nuevo/:id",component:_}),r.a.createElement(s.a,{exact:!0,path:"/iniciar-sesion",component:H})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[145,1,2]]]);
//# sourceMappingURL=main.bf86474b.chunk.js.map